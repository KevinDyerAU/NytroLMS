!function(t,e){"use strict";function i(t){this.$form=e(t),this.$requiredFields=this.$form.find("[required]"),this.initialise()}function r(t){e(t||document).find("form").filter((function(){return e(this).find("[data-client-validate]").length>0})).each((function(){var t=e(this);t.data("studentFormValidator")||t.data("studentFormValidator",new i(this))}))}i.prototype.initialise=function(){var t=this;this.$form.attr("novalidate",!0),this.$requiredFields.each((function(){var i=e(this);i.data("clientValidationBound")||(i.on("input.clientValidation change.clientValidation",(function(){t.validateField(this)})),i.data("clientValidationBound",!0))})),this.$form.on("submit.clientValidation",(function(e){t.validateForm()||(e.preventDefault(),e.stopImmediatePropagation(),t.focusFirstInvalid())}));var i=this.$form.find("#clear-form");i.length&&i.on("click.clientValidation",(function(e){e.preventDefault(),t.clearForm()}))},i.prototype.validateForm=function(){var t=this,e=!0;return this.$requiredFields.each((function(){t.validateField(this)||(e=!1)})),e},i.prototype.validateField=function(t){var i=e(t);if(i.prop("disabled"))return!0;if("hidden"===i.attr("type")&&!this.isSelect2(i))return!0;if(!this.isSelect2(i)&&!i.is(":visible"))return!0;if(i.closest(".modal:not(.show)").length>0)return!0;var r=this.getFieldValue(i);return null!==r&&""!==r?(this.clearError(i),!0):(this.showError(i),!1)},i.prototype.getFieldValue=function(t){if(t.is(":checkbox"))return t.is(":checked")?"1":"";if(t.is(":radio")){var e=t.attr("name");if(!e)return"";var i=this.$form.find('input[name="'+e+'"]:checked');return i.length?i.val():""}var r=t.val();if(Array.isArray(r)){var n=r.filter((function(t){return null!==t&&""!==String(t).trim()}));return n.length?n.join(","):""}return null==r?"":String(r).trim()},i.prototype.showError=function(t){var e=(t=this.asJQuery(t)).data("validationMessage")||this.getFieldLabel(t)||"This field is required.";e&&"This field is required."!==e&&(e=e.replace(/\s*\*/g,"").trim(),/required\.$/i.test(e)||(e+=" is required.")),this.getFeedbackElement(t).text(e).addClass("d-block"),this.isSelect2(t)?this.toggleSelect2State(t,!0):t.addClass("is-invalid")},i.prototype.clearError=function(t){t=this.asJQuery(t),this.isSelect2(t)?this.toggleSelect2State(t,!1):t.removeClass("is-invalid");var e=this.getFeedbackElement(t,!1);e.length&&e.removeClass("d-block").text("")},i.prototype.getFeedbackElement=function(t,i){void 0===i&&(i=!0);var r=t.closest(".mb-1").find('.invalid-feedback[data-client-feedback="true"]');if(r.length||!i)return r;var n=e('<div class="invalid-feedback" data-client-feedback="true"></div>');if(this.isSelect2(t)){var a=t.next(".select2");a.length?n.insertAfter(a):n.insertAfter(t)}else n.insertAfter(t);return n},i.prototype.toggleSelect2State=function(t,e){var i=t.next(".select2");if(i.length){var r=i.find(".select2-selection");e?(t.addClass("is-invalid"),r.addClass("is-invalid"),i.addClass("select2-container-invalid")):(t.removeClass("is-invalid"),r.removeClass("is-invalid"),i.removeClass("select2-container-invalid"))}},i.prototype.isSelect2=function(t){return t.hasClass("select2-hidden-accessible")},i.prototype.asJQuery=function(t){return t instanceof e?t:e(t)},i.prototype.getFieldLabel=function(t){var e=t.closest(".mb-1, .form-group"),i="";if(e.length){var r=e.find("label").first();r.length&&(i=r.text().trim())}return i||(i=t.attr("aria-label")||t.attr("placeholder")||""),i},i.prototype.focusFirstInvalid=function(){var t=this.$form.find(".is-invalid:visible").first();if(t.length)t.trigger("focus");else{var e=this.$form.find(".select2 .is-invalid").first();e.length&&e.trigger("focus")}},i.prototype.clearForm=function(){var t=this;this.$form.find("input, textarea").each((function(){var i=e(this);"hidden"===i.attr("type")||i.is('[name="_token"], [name="_method"], [name="v"]')||(i.is(":checkbox")||i.is(":radio")?i.prop("checked",!1):(i.is('[type="file"]'),i.val("")),t.clearError(i))})),this.$form.find("select").each((function(){var i=e(this);i.prop("multiple")?i.val([]):i.val(""),i.hasClass("select2-hidden-accessible")&&i.trigger("change"),t.clearError(i)}))},t.StudentFormValidation={init:r},e(document).ready((function(){r(document)})),e(document).on("shown.bs.modal",(function(t){r(t.target)}))}(window,window.jQuery);
