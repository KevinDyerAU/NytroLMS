class JSONTree{constructor(e){this.container=e,this.data=null,this.container.addEventListener("click",(e=>{if(e.target.classList.contains("collapsible")){e.target.classList.toggle("collapsed");const t=e.target.closest("li").querySelector("ul");t&&(t.style.display=e.target.classList.contains("collapsed")?"none":"block")}}))}render(e){this.data=e,this.container.innerHTML="";const t=document.createElement("div");t.className="json-tree-wrapper",t.appendChild(this.renderValue(e)),this.container.appendChild(t)}renderValue(e){return null===e?this.renderSimpleValue(e,"null"):"boolean"==typeof e?this.renderSimpleValue(e,"boolean"):"number"==typeof e?this.renderSimpleValue(e,"number"):"string"==typeof e?this.renderSimpleValue(e,"string"):Array.isArray(e)?this.renderArray(e):"object"==typeof e?this.renderObject(e):document.createTextNode(String(e))}renderSimpleValue(e,t){const n=document.createElement("span");return n.className=t,n.textContent=JSON.stringify(e),n}renderArray(e){if(0===e.length){const e=document.createElement("span");return e.textContent="[]",e}const t=document.createElement("div"),n=document.createElement("span");n.className="collapsible",n.textContent="[",t.appendChild(n);const l=document.createElement("ul");l.style.display="block",e.forEach(((t,n)=>{const a=document.createElement("li");a.appendChild(this.renderValue(t)),n<e.length-1&&a.appendChild(document.createTextNode(",")),l.appendChild(a)})),t.appendChild(l);const a=document.createElement("span");return a.textContent="]",t.appendChild(a),t}renderObject(e){if(0===Object.keys(e).length){const e=document.createElement("span");return e.textContent="{}",e}const t=document.createElement("div"),n=document.createElement("span");n.className="collapsible",n.textContent="{",t.appendChild(n);const l=document.createElement("ul");l.style.display="block",Object.entries(e).forEach((([e,t],n,a)=>{const r=document.createElement("li"),c=document.createElement("span");c.className="key",c.textContent=`"${e}": `,r.appendChild(c),r.appendChild(this.renderValue(t)),n<a.length-1&&r.appendChild(document.createTextNode(",")),l.appendChild(r)})),t.appendChild(l);const a=document.createElement("span");return a.textContent="}",t.appendChild(a),t}expandAll(){this.container.querySelectorAll(".collapsible").forEach((e=>{e.classList.remove("collapsed");const t=e.closest("div").querySelector("ul");t&&(t.style.display="block")}))}collapseAll(){this.container.querySelectorAll(".collapsible").forEach((e=>{e.classList.add("collapsed");const t=e.closest("div").querySelector("ul");t&&(t.style.display="none")}))}}
