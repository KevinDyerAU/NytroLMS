var myDataTable=function(e){e.readyMyDataTable=!1;let t={tableName:""};return e.init=function(a={}){e.readyMyDataTable=!0,t.tableName=a.tableName||t.tableName},e.setupDefaults=function(){return{searchDelay:600,columnDefs:[{className:"control",orderable:!1,responsivePriority:2,targets:0},{targets:1,orderable:!1,responsivePriority:3,render:function(e,t,a,l){return'<div class="form-check"> <input class="form-check-input dt-checkboxes" type="checkbox" value="" id="checkbox'+e+'" /><label class="form-check-label" for="checkbox'+e+'"></label></div>'},checkboxes:{selectAllRender:'<div class="form-check"> <input class="form-check-input" type="checkbox" value="" id="checkboxSelectAll" /><label class="form-check-label" for="checkboxSelectAll"></label></div>'},visible:!1},{targets:2,visible:!1}],order:[[3,"asc"]],dom:'<"card-header border-bottom p-1"<"head-label"><"dt-action-buttons text-end"B>><"d-flex justify-content-between align-items-center mx-0 row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"f>r><"table-responsive"t><"d-flex justify-content-between mx-0 row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',displayLength:50,lengthMenu:[10,15,30,50,100],buttons:[{extend:"collection",className:"btn btn-outline-secondary dropdown-toggle me-2",text:feather.icons.share.toSvg({class:"font-small-4 me-50"})+"Export",buttons:[{extend:"print",text:feather.icons.printer.toSvg({class:"font-small-4 me-50"})+"Print",className:"dropdown-item",exportOptions:{modifier:{selected:null},columns:":visible"},customize:function(e){$(e.document.body).css("font-size","10pt"),$(e.document.body).find("table").addClass("compact").css("font-size","inherit")}},{extend:"csv",text:feather.icons["file-text"].toSvg({class:"font-small-4 me-50"})+"Csv",className:"dropdown-item",exportOptions:{columns:":visible"}},{extend:"excel",text:feather.icons.file.toSvg({class:"font-small-4 me-50"})+"Excel",className:"dropdown-item",exportOptions:{columns:":visible"}},{extend:"pdfHtml5",orientation:"landscape",text:feather.icons.download.toSvg({class:"font-small-4 me-50"})+"Pdf",className:"dropdown-item",exportOptions:{columns:":visible"}}],init:function(e,t,a){$(t).removeClass("btn-secondary"),$(t).parent().removeClass("btn-group"),setTimeout((function(){$(t).closest(".dt-buttons").removeClass("btn-group").addClass("d-inline-flex")}),50)}}],responsive:{details:{display:$.fn.dataTable.Responsive.display.modal({header:function(e){return"Details of "+e.data().full_name}}),type:"column",renderer:function(e,t,a){var l=$.map(a,(function(e,t){return""!==e.title?'<tr data-dt-row="'+e.rowIdx+'" data-dt-column="'+e.columnIndex+'"><td>'+e.title+":</td> <td>"+e.data+"</td></tr>":""})).join("");return!!l&&$('<table class="table"/>').append("<tbody>"+l+"</tbody>")}}},language:{paginate:{previous:"&nbsp;",next:"&nbsp;"}}}},e.setupExtras=function(t){return t.buttons=e.setupAddRecordButton(t),t.columnDefs=e.setupActionColumnDef(t),t},e.showPopup=function(e,t){axios.get(t).then((t=>{const a=t.data;if("success"===a.status){$("#"+e).find(".modal-body").html(a.data.rendered);let t=document.getElementById(e);new bootstrap.Modal(t).show(),$("#"+e).find(".date-picker").each((function(){let e=$(this).data("mindate"),t=$(this).data("enddate");t&&e&&new Date(e)<new Date(t)&&(e=t),$(this).flatpickr({dateFormat:"Y-m-d",minDate:e||(new Date).fp_incr(-730)})}))}})).catch((e=>{console.log(e)}))},e.setupActionColumnDef=function(e,t,a=!1,l=0){let o=$.extend(!0,[],e.columnDefs);const s="javascript:void(0);";let n={targets:l,title:"Actions",orderable:!1,searchable:!1,render:function(e,l,o,n){let r={popup:"",view:"",edit:"",delete_restore:"",destroy:""};delete_restore={icon:"",text_color:"",title:""},a=o.can_edit??a,r.popup=t.popup?t.popup._route.replace(":id",o.id).replace(":user_id",o.user_id):s,r.view=t.view?t.view.replace(":id",o.id).replace(":slug",o.slug).replace(":user_id",o.user_id):s,r.edit=t.edit?t.edit.replace(":id",o.id).replace(":slug",o.slug).replace(":user_id",o.user_id):s,r.destroy=t.destroy?t.destroy.replace(":id",o.id).replace(":user_id",o.user_id):s,null===o.deleted_at?(r.delete_restore=t.delete?t.delete.replace(":id",o.id).replace(":slug",o.slug).replace(":user_id",o.user_id):s,delete_restore.icon="x-square",delete_restore.text_color="text-danger",delete_restore.title="Delete"):(r.delete_restore=t.restore?t.delete_restore.replace(":id",o.id).replace(":slug",o.slug).replace(":user_id",o.user_id):s,delete_restore.icon="refresh-ccw",delete_restore.text_color="text-success",delete_restore.title="Restore");var i=!1,c=!1;return void 0===t.restore&&void 0===t.delete&&(i=!0),void 0===t.destroy&&(c=!0),(a?(i?"":'<a href="'+r.delete_restore+'" class="item-edit me-1 '+delete_restore.text_color+'" title="'+delete_restore.title+'">'+feather.icons[delete_restore.icon].toSvg({class:"font-small-4"})+"</a>")+(c?"":'<a href="'+s+'" class="item-edit me-1 text-danger" title="Remove" onclick="'+r.destroy+'">'+feather.icons["x-square"].toSvg({class:"font-small-4"})+"</a>")+'<a href="'+r.edit+'" class="item-edit me-1 text-secondary" title="Edit">'+feather.icons.edit.toSvg({class:"font-small-4"})+"</a>":"")+(t.view?'<a href="'+r.view+'" class="item-view me-1 text-primary" title="View Details">'+feather.icons["file-text"].toSvg({class:"font-small-4"})+"</a>":"")+(t.popup?"<a onclick=\"myDataTable.showPopup('"+t.popup.target+"','"+r.popup+'\')" href="'+s+'" class="item-view me-1 text-primary" title="Show Details '+o.id+'">'+feather.icons.eye.toSvg({class:"font-small-4"})+"</a>":"")}};return o.push(n),o},e.setupAddRecordButton=function(e){let t=$.extend(!0,[],e.buttons),a={text:feather.icons.plus.toSvg({class:"me-50 font-small-4"})+"Add New Record",className:"create-new btn btn-primary",action:function(e,t,a,l){window.location=window.location.href+"/create"},init:function(e,t,a){$(t).removeClass("btn-secondary")}};return t.push(a),t},e.showCreateRecordModal=function(e="modals-slide-in"){new bootstrap.Modal(document.getElementById(e)).show()},e.initDefaults=function(e){$.extend(!0,$.fn.dataTable.defaults,e),$(".head-label").html('<h6 class="mb-0">'+e.tableName+"</h6>")},e.refresh=function(e){e.draw()},e.filterColumn=function(e,t,a){$("#"+e).DataTable().column(t).search(a,!1,!0).draw()},e.search=function(e,t){console.log(e,t),$("#"+e).DataTable().search(t,!1,!0).draw()},e.newExportAction=function(e,t,a,l){var o=this,s=t.settings()[0]._iDisplayStart;t.one("preXhr",(function(e,n,r){r.start=0,r.length=2147483647,t.one("preDraw",(function(e,n){return a[0].className.indexOf("buttons-copy")>=0?$.fn.dataTable.ext.buttons.copyHtml5.action.call(o,e,t,a,l):a[0].className.indexOf("buttons-excel")>=0?$.fn.dataTable.ext.buttons.excelHtml5.available(t,l)?$.fn.dataTable.ext.buttons.excelHtml5.action.call(o,e,t,a,l):$.fn.dataTable.ext.buttons.excelFlash.action.call(o,e,t,a,l):a[0].className.indexOf("buttons-csv")>=0?$.fn.dataTable.ext.buttons.csvHtml5.available(t,l)?$.fn.dataTable.ext.buttons.csvHtml5.action.call(o,e,t,a,l):$.fn.dataTable.ext.buttons.csvFlash.action.call(o,e,t,a,l):a[0].className.indexOf("buttons-pdf")>=0?$.fn.dataTable.ext.buttons.pdfHtml5.available(t,l)?$.fn.dataTable.ext.buttons.pdfHtml5.action.call(o,e,t,a,l):$.fn.dataTable.ext.buttons.pdfFlash.action.call(o,e,t,a,l):a[0].className.indexOf("buttons-print")>=0&&$.fn.dataTable.ext.buttons.print.action(e,t,a,l),t.one("preXhr",(function(e,t,a){n._iDisplayStart=s,a.start=s})),setTimeout(t.ajax.reload,0),!1}))})),t.ajax.reload()},e}(myDataTable||{});$(document).ready((function(){myDataTable.init()})),window.myDataTable=myDataTable;
