!function(t,n){"use strict";var e=function(n,e,a){var s=n.ajax.params();return s.action=e,s._token=t('meta[name="csrf-token"]').attr("content"),s.visible_columns=a?o():null,s},o=function(){var e=[];return t.each(n.settings[0].aoColumns,(function(t,n){n.bVisible&&e.push(n.name)})),e},a=function(n,e){toastr.info("Please wait, downloading",{timeOut:5e3}),toastr.options.closeButton=!0,toastr.options.preventDuplicates=!0;var o=n+"/export",a=new XMLHttpRequest;a.open("POST",o,!0),a.responseType="arraybuffer",a.onprogress=function(t){toastr.info("Downloading in progress")},a.onload=function(){if(toastr.clear(),toastr.success("File ready to save","Download Successful",{timeOut:5e3}),200===this.status){var t="",n=a.getResponseHeader("Content-Disposition");if(n&&-1!==n.indexOf("attachment")){var e=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n);null!=e&&e[1]&&(t=e[1].replace(/['"]/g,""))}var o=a.getResponseHeader("Content-Type"),s=new Blob([this.response],{type:o});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(s,t);else{var i=window.URL||window.webkitURL,c=i.createObjectURL(s);if(t){var l=document.createElement("a");void 0===l.download?window.location=c:(l.href=c,l.download=t,document.body.appendChild(l),l.click())}else window.location=c;setTimeout((function(){i.revokeObjectURL(c)}),100)}}else console.log(`Error ${a.status}: ${a.statusText}`)},a.onerror=function(){console.log("Request failed")},a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(t.param(e))},s=function(n,e){var o=n.ajax.url()||"",a=n.ajax.params();return a.action=e,o.indexOf("?")>-1?o+"&"+t.param(a):o+"?"+t.param(a)};n.ext.buttons.excel={className:"buttons-excel",text:function(t){return'<i class="fa fa-file-excel-o"></i> '+t.i18n("buttons.excel","Excel")},action:function(t,n,e,o){var a=s(n,"excel");window.location=a}},n.ext.buttons.postExcel={className:"buttons-excel",text:function(t){return'<i class="fa fa-file-excel-o"></i> '+t.i18n("buttons.excel","Excel")},action:function(t,n,o,s){var i=n.ajax.url()||window.location.href,c=e(n,"excel");a(i,c)}},n.ext.buttons.postExcelVisibleColumns={className:"buttons-excel",text:function(t){return'<i class="fa fa-file-excel-o"></i> '+t.i18n("buttons.excel","Excel (only visible columns)")},action:function(t,n,o,s){var i=n.ajax.url()||window.location.href,c=e(n,"excel",!0);a(i,c)}},n.ext.buttons.export={extend:"collection",className:"buttons-export",text:function(t){return'<i class="fa fa-download"></i> '+t.i18n("buttons.export","Export")+'&nbsp;<span class="caret"/>'},buttons:["csv","excel","pdf"]},n.ext.buttons.csv={className:"buttons-csv",text:function(t){return'<i class="fa fa-file-excel-o"></i> '+t.i18n("buttons.csv","CSV")},action:function(t,n,e,o){var a=s(n,"csv");window.location=a}},n.ext.buttons.postCsvVisibleColumns={className:"buttons-csv",text:function(t){return'<i class="fa fa-file-excel-o"></i> '+t.i18n("buttons.csv","CSV (only visible columns)")},action:function(t,n,o,s){var i=n.ajax.url()||window.location.href,c=e(n,"csv",!0);a(i,c)}},n.ext.buttons.postCsv={className:"buttons-csv",text:function(t){return'<i class="fa fa-file-excel-o"></i> '+t.i18n("buttons.csv","CSV")},action:function(t,n,o,s){var i=n.ajax.url()||window.location.href,c=e(n,"csv");a(i,c)}},n.ext.buttons.pdf={className:"buttons-pdf",text:function(t){return'<i class="fa fa-file-pdf-o"></i> '+t.i18n("buttons.pdf","PDF")},action:function(t,n,e,o){var a=s(n,"pdf");window.location=a}},n.ext.buttons.postPdf={className:"buttons-pdf",text:function(t){return'<i class="fa fa-file-pdf-o"></i> '+t.i18n("buttons.pdf","PDF")},action:function(t,n,o,s){var i=n.ajax.url()||window.location.href,c=e(n,"pdf");a(i,c)}},n.ext.buttons.print={className:"buttons-print",text:function(t){return'<i class="fa fa-print"></i> '+t.i18n("buttons.print","Print")},action:function(t,n,e,o){var a=s(n,"print");window.location=a}},n.ext.buttons.reset={className:"buttons-reset",text:function(t){return'<i class="fa fa-undo"></i> '+t.i18n("buttons.reset","Reset")},action:function(t,n,e,o){n.search(""),n.columns().search(""),n.draw()}},n.ext.buttons.reload={className:"buttons-reload",text:function(t){return'<i class="fa fa-refresh"></i> '+t.i18n("buttons.reload","Reload")},action:function(t,n,e,o){n.draw(!1)}},n.ext.buttons.create={className:"buttons-create",text:function(t){return'<i class="fa fa-plus"></i> '+t.i18n("buttons.create","Create")},action:function(t,n,e,o){window.location=window.location.href.replace(/\/+$/,"")+"/create"}},void 0!==n.ext.buttons.copyHtml5&&t.extend(n.ext.buttons.copyHtml5,{text:function(t){return'<i class="fa fa-copy"></i> '+t.i18n("buttons.copy","Copy")}}),void 0!==n.ext.buttons.colvis&&t.extend(n.ext.buttons.colvis,{text:function(t){return'<i class="fa fa-eye"></i> '+t.i18n("buttons.colvis","Column visibility")}})}(jQuery,jQuery.fn.dataTable);
