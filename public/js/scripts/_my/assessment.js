var Assessment=function(t){return t.MarkAnswer=(s,e,a)=>{t.postAttempt(e,"answer",{question:s,status:a})},t.SubmitComment=(s,e,a)=>{let n=s.getData().trim();n.length<1?$("#comment_"+e+"_alert").fadeIn():($("#comment_"+e+"_alert").fadeOut(),t.postAttempt(a,"answer",{question:e,comment:n}))},t.ToggleCommentAnswer=t=>{$("#"+t).slideToggle()},t.MarkAttempt=(s,e,a)=>{let n=s.getData().trim();n.length<1?$("#feedback_"+e+"_alert").fadeIn():($("#feedback_"+e+"_alert").fadeOut(),t.postAttempt(e,"feedback",{status:a,feedback:n},!0))},t.EmailResults=s=>{t.postAttempt(s,"email")},t.returnToStudent=s=>{t.postAttempt(s,"return",{},!0)},t.postAttempt=async(t,s,e,a=!1)=>(e&&(e.assisted=$("#assisted").is(":checked")?1:0),await axios.post("/api/v1/assessments/"+t+"/"+s,e).then((t=>{let n=t.data;if(!0===n.success){if(toastr.info(n.message,"Information",{closeButton:!0,tapToDismiss:!0}),n.data.results){let t=`<div class='alert alert-${"correct"===n.data.results[e.question].status?"info":"danger"} p-1 me-1'><p>Marked as\n                            <strong>${n.data.results[e.question].status}</strong>`;n.data.results[e.question].comment&&(t+=`, with comments:\n                                <span>${n.data.results[e.question].comment}</span>`),t+="</p></div>",$("#existing"+e.question).html(t)}if(a){const t=new URLSearchParams(window.location.search).get("status"),s=new URLSearchParams(window.location.search).get("redirect");s&&console.log(s.toLowerCase(),n.data),s&&"student"===s.toLowerCase()?window.location.href="/account-manager/students/"+n.data.user_id+"#student-assessments"+(t?"?status="+t:""):window.location.href="/assessments"+(t?"?status="+t:"")}}else toastr.warning("Unable to submit "+s,"Error",{closeButton:!0,tapToDismiss:!0})})).catch((t=>{if(console.log(t),void 0!==t.response){const e=t.response.data;let a="\n\r Reason(s): ";$.each(e.message?e.message:e.errors,(function(t,s){a+="\n\r"+("number"!=typeof t?t+": ":"")+(s.message?s.message:s)})),toastr.warning("Unable to submit "+s+":"+a,"Error",{closeButton:!0,tapToDismiss:!0})}}))),t}(Assessment||{});window;
